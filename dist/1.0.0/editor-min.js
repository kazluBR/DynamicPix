//compress by https://www.digitalocean.com/community/tools/minify
const SVG_LIB="http://www.w3.org/2000/svg",SQUARE_COLOR_SIZE=40,MIN_DIMENSION=3,MAX_WIDTH_DIMENSION=125,MAX_HEIGTH_DIMENSION=50,TRANSLATE_X=10,TRANSLATE_Y=10,LINE_COLOR="#808080",RULE_COLOR="#ff00ff",ARROW_COLOR="#ff00ff",CALCULATED_EMPTY_COLOR="#808080";class editor{#size;#width;#height;#gridLength;#palette;#backgroundColor;#currentColor;#clicked;#states;#currentKey;#squareI;#squareJ;#colorSquare;constructor(t={}){this.#size=t.size||20,this.#width=t.width||5,this.#height=t.height||5,this.#gridLength=t.gridLength||5,this.#palette=t.palette||["#ffffff","#8e3179","#ca3435","#ff91a4","#fcd667","#93dfb8","#b5b35c","#02a4d3","#00468c"],this.#backgroundColor=this.#palette[0],this.#currentColor=this.#palette[1],this.#clicked=!1,this.#states=[],this.#currentKey=0,this.#squareI=null,this.#squareJ=null,this.#colorSquare=null,document.body.onmousedown=t=>{if(1==t.button)return this.#switchSquareColor(),!1},document.body.onmouseup=()=>this.#endColorsChange()}init(t){let e=document.getElementsByTagName("svg")[0];e&&e.remove(),t&&(this.#backgroundColor=t.colors[0],this.#currentColor=t.colors[1],this.#palette=t.colors,this.#width=t.settings.width,this.#height=t.settings.height,this.#gridLength=t.settings.gridLength),this.#createSvgDocument();for(let t=1;t<this.#palette.length;t++)this.#createSquareColor(t);this.#createBackground();for(let t=0;t<125;t++)for(let e=0;e<50;e++)this.#createSquare(t,e),this.#createSquareAux(t,e);for(let t=0;t<=this.#width;t++)this.#createLine(0,t);for(let t=0;t<=this.#height;t++)this.#createLine(1,t);this.#createCalculated(0),this.#createCalculated(1),this.#createDecreaseArrow(0),this.#createIncreaseArrow(0),this.#createDecreaseArrow(1),this.#createIncreaseArrow(1),this.#createDecreaseArrow(2),this.#createIncreaseArrow(2),this.#saveState(),this.#refreshCursor(),t&&(this.#refreshArea(),this.#loadPoints(t))}maximize(t){this.#size+=t||1,this.#changeAreaSize()}minimize(t){this.#size-=t||1,this.#size<1?this.#size+=t||1:this.#changeAreaSize()}undo(){this.#currentKey>0&&(this.#currentKey-=1,this.#recoverState())}redo(){this.#currentKey<this.#states.length-1&&(this.#currentKey+=1,this.#recoverState())}setGridLength(t){t>1&&(this.#gridLength=t,this.#width=t,this.#height=t,this.#refreshArea())}setPalette(t){this.#palette=t,this.#refreshSquareColors();let e=this.#backgroundColor;this.#backgroundColor=t[0],this.#refreshBackground(e),this.#currentColor=t[1]}generateJson(){let t,e,i={colors:[this.#backgroundColor],settings:{width:this.#width,height:this.#height,gridLength:this.#gridLength},points:[],horizontalNumbers:[],verticalNumbers:[]};for(let s=0;s<this.#height;s++){i.points[s]=[];for(let r=0;r<this.#width;r++)t=document.getElementById("square_"+r+"."+s),e=t.getAttribute("fill"),i.colors.includes(e)||i.colors.push(e),i.points[s].push(i.colors.findIndex((t=>t==e)))}return i.horizontalNumbers=this.#getHorizontalNumbers(i),i.verticalNumbers=this.#getVerticalNumbers(i),i.settings.horizontalNumbersLength=this.#getMaxNumbers(i.horizontalNumbers),i.settings.verticalNumbersLength=this.#getMaxNumbers(i.verticalNumbers),JSON.stringify(i,null,2)}#createSvgDocument(){let t=document.getElementById("editor");t.oncontextmenu=function(){return!1};let e=document.createElementNS(SVG_LIB,"svg"),i="translate(10,10)",s=document.createElementNS(SVG_LIB,"g");s.setAttribute("transform",i),s.setAttribute("id","palette"),e.appendChild(s);i="translate(10,70)",e.setAttribute("height",this.#size*(this.#height+3)+10+60),this.#size*(this.#width+3)>40*this.#palette.length?e.setAttribute("width",this.#size*(this.#width+3)+10):e.setAttribute("width",40*this.#palette.length+10);let r=document.createElementNS(SVG_LIB,"g");r.setAttribute("id","components"),r.setAttribute("transform",i),e.appendChild(r);let h=document.createElementNS(SVG_LIB,"g");h.setAttribute("id","main"),h.setAttribute("transform",i),e.appendChild(h);let o=document.createElementNS(SVG_LIB,"g");o.setAttribute("id","aux"),o.setAttribute("transform",i),e.appendChild(o);let u=document.createElementNS(SVG_LIB,"g");u.setAttribute("id","arrows"),u.setAttribute("transform",i),e.appendChild(u),t.appendChild(e)}#createSquareColor(t){let e=document.createElementNS(SVG_LIB,"rect");e.setAttribute("id","squareColor_"+t),1==t?e.setAttribute("stroke-width","3"):e.setAttribute("stroke-width","1"),e.setAttribute("stroke","black"),e.setAttribute("height",40),e.setAttribute("width",40),e.setAttribute("fill",this.#palette[t]),e.setAttribute("x",40*(t-1)+5),e.setAttribute("y",5),e.onclick=t=>this.#markSquareColor(t),document.getElementById("palette").appendChild(e)}#createBackground(){let t=document.createElementNS(SVG_LIB,"rect");t.setAttribute("id","background"),t.setAttribute("fill",this.#backgroundColor),t.setAttribute("height",this.#size*this.#height),t.setAttribute("width",this.#size*this.#width),document.getElementById("components").appendChild(t)}#createSquare(t,e){let i=document.createElementNS(SVG_LIB,"rect");i.setAttribute("id","square_"+t+"."+e),i.setAttribute("height",.9*this.#size),i.setAttribute("width",.9*this.#size),i.setAttribute("x",t*this.#size+.05*this.#size),i.setAttribute("y",e*this.#size+.05*this.#size),i.setAttribute("fill",this.#backgroundColor),i.setAttribute("opacity","0"),document.getElementById("main").appendChild(i)}#createSquareAux(t,e){let i=document.createElementNS(SVG_LIB,"rect");i.setAttribute("id","square_aux_"+t+"."+e),i.setAttribute("height",.9*this.#size),i.setAttribute("width",.9*this.#size),i.setAttribute("x",t*this.#size+.05*this.#size),i.setAttribute("y",e*this.#size+.05*this.#size),i.setAttribute("fill",this.#backgroundColor),i.setAttribute("opacity","0"),i.onmouseover=t=>this.#highlightSquare(t),i.onmouseout=t=>this.#fadeSquare(t),i.onmousedown=t=>this.#initColorsChange(t),i.onmousemove=t=>this.#changeColorSquares(t),document.getElementById("aux").appendChild(i)}#createLine(t,e){let i=document.createElementNS(SVG_LIB,"line");i.setAttribute("id","line_"+t+"."+e),i.setAttribute("stroke","#808080"),e%this.#gridLength==0?i.setAttribute("stroke-width","2"):i.setAttribute("stroke-width","1"),0==t?(i.setAttribute("x1",e*this.#size),i.setAttribute("x2",e*this.#size),i.setAttribute("y1",0),i.setAttribute("y2",this.#height*this.#size)):(i.setAttribute("x1",0),i.setAttribute("x2",this.#width*this.#size),i.setAttribute("y1",e*this.#size),i.setAttribute("y2",e*this.#size)),document.getElementById("components").appendChild(i)}#createCalculated(t){let e=document.createElementNS(SVG_LIB,"text");e.setAttribute("id","calculated_"+t),e.setAttribute("font-family","serif"),e.setAttribute("font-size",this.#size),e.setAttribute("font-weight","bold"),e.setAttribute("fill","#808080"),0==t?(e.setAttribute("text-anchor","start"),e.setAttribute("x",(this.#width+.5)*this.#size)):(e.setAttribute("text-anchor","middle"),e.setAttribute("y",(this.#height+1)*this.#size)),e.setAttribute("style","-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;"),document.getElementById("components").appendChild(e)}#createDecreaseArrow(t){let e=document.createElementNS(SVG_LIB,"text");e.setAttribute("id","decrease_arrow_"+t),e.setAttribute("font-size",this.#size),e.setAttribute("fill","#ff00ff"),e.setAttribute("opacity","0.5"),0==t?(e.setAttribute("text-anchor","end"),e.setAttribute("x",this.#width*this.#size/2+this.#size/2),e.setAttribute("y",this.#height*this.#size+this.#size),e.textContent="🢁"):1==t?(e.setAttribute("text-anchor","middle"),e.setAttribute("x",this.#width*this.#size+this.#size),e.setAttribute("y",this.#height*this.#size/2+this.#size/4),e.textContent="🢀"):(e.setAttribute("text-anchor","middle"),e.setAttribute("x",this.#width*this.#size+this.#size),e.setAttribute("y",this.#height*this.#size+this.#size),e.textContent="🢄"),e.setAttribute("style","-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;"),e.onmouseover=t=>this.#highlightDecreaseArrow(t),e.onmouseout=t=>this.#fadeDecreaseArrow(t),e.onclick=t=>this.#decreaseSize(t),document.getElementById("arrows").appendChild(e)}#createIncreaseArrow(t){let e=document.createElementNS(SVG_LIB,"text");e.setAttribute("id","increase_arrow_"+t),e.setAttribute("font-size",this.#size),e.setAttribute("fill","#ff00ff"),e.setAttribute("opacity","0.5"),0==t?(e.setAttribute("text-anchor","end"),e.setAttribute("x",this.#width*this.#size/2+this.#size/2),e.setAttribute("y",this.#height*this.#size+2*this.#size+this.#size/4),e.textContent="🢃"):1==t?(e.setAttribute("text-anchor","middle"),e.setAttribute("x",this.#width*this.#size+2*this.#size),e.setAttribute("y",this.#height*this.#size/2+this.#size/4),e.textContent="🢂"):(e.setAttribute("text-anchor","middle"),e.setAttribute("x",this.#width*this.#size+2*this.#size-this.#size/4),e.setAttribute("y",this.#height*this.#size+2*this.#size-this.#size/4),e.textContent="🢆"),e.setAttribute("style","-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;"),e.onmouseover=t=>this.#highlightIncreaseArrow(t),e.onmouseout=t=>this.#fadeIncreaseArrow(t),e.onclick=t=>this.#increaseSize(t),document.getElementById("arrows").appendChild(e)}#refreshCursor(){document.getElementById("editor").style="cursor: url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24'%3e%3cpath fill='%23"+this.#currentColor.replace("#","")+"' stroke='black' d='M7.127 22.562l-7.127 1.438 1.438-7.128 5.689 5.69zm1.414-1.414l11.228-11.225-5.69-5.692-11.227 11.227 5.689 5.69zm9.768-21.148l-2.816 2.817 5.691 5.691 2.816-2.819-5.691-5.689z'/%3e%3c/svg%3e\") 0 32, pointer;"}#saveState(){for(;this.#currentKey<this.#states.length-1;)this.#states.pop();this.#states.push((new XMLSerializer).serializeToString(document.getElementById("main"))),this.#states.length>1&&(this.#currentKey+=1)}#recoverState(){let t=document.getElementById("main");for(;t.firstChild;)t.removeChild(t.firstChild);let e=(new DOMParser).parseFromString(this.#states[this.#currentKey],"image/svg+xml").documentElement;for(;e.firstChild;)t.appendChild(e.firstChild);this.#changeAreaSize(),this.#refreshArea()}#changeAreaSize(){this.#changeSvgDocumentSize(),this.#changeBackgroundSize();for(let t=0;t<=this.#width;t++)this.#changeLineSize(0,t);for(let t=0;t<=this.#height;t++)this.#changeLineSize(1,t);for(let t=0;t<125;t++)for(let e=0;e<50;e++)this.#changeSquareSize(t,e),this.#changeSquareAuxSize(t,e);this.#changeCalculatedSize(0),this.#changeCalculatedSize(1),this.#changeDecreaseArrowSize(0),this.#changeIncreaseArrowSize(0),this.#changeDecreaseArrowSize(1),this.#changeIncreaseArrowSize(1),this.#changeDecreaseArrowSize(2),this.#changeIncreaseArrowSize(2)}#changeSvgDocumentSize(){let t=document.getElementsByTagName("svg")[0];t.setAttribute("height",this.#size*(this.#height+3)+10+60),this.#size*(this.#width+3)>40*this.#palette.length?t.setAttribute("width",this.#size*(this.#width+3)+10):t.setAttribute("width",40*this.#palette.length+10)}#changeBackgroundSize(){let t=document.getElementById("background");t.setAttribute("height",this.#size*this.#height),t.setAttribute("width",this.#size*this.#width)}#changeLineSize(t,e){let i=document.getElementById("line_"+t+"."+e);0==t?(i.setAttribute("x1",e*this.#size),i.setAttribute("x2",e*this.#size),i.setAttribute("y1",0),i.setAttribute("y2",this.#height*this.#size)):(i.setAttribute("x1",0),i.setAttribute("x2",this.#width*this.#size),i.setAttribute("y1",e*this.#size),i.setAttribute("y2",e*this.#size))}#changeSquareSize(t,e){let i=document.getElementById("square_"+t+"."+e);i.setAttribute("height",.9*this.#size),i.setAttribute("width",.9*this.#size),i.setAttribute("x",t*this.#size+.05*this.#size),i.setAttribute("y",e*this.#size+.05*this.#size)}#changeSquareAuxSize(t,e){let i=document.getElementById("square_aux_"+t+"."+e);i.setAttribute("height",.9*this.#size),i.setAttribute("width",.9*this.#size),i.setAttribute("x",t*this.#size+.05*this.#size),i.setAttribute("y",e*this.#size+.05*this.#size)}#changeCalculatedSize(t){let e=document.getElementById("calculated_"+t);e.setAttribute("font-size",this.#size),0==t?e.setAttribute("x",(this.#width+.5)*this.#size):e.setAttribute("y",(this.#height+1)*this.#size)}#changeDecreaseArrowSize(t){let e=document.getElementById("decrease_arrow_"+t);e.setAttribute("font-size",this.#size),0==t?(e.setAttribute("x",this.#width*this.#size/2+this.#size/2),e.setAttribute("y",this.#height*this.#size+this.#size)):1==t?(e.setAttribute("x",this.#width*this.#size+this.#size),e.setAttribute("y",this.#height*this.#size/2+this.#size/4)):(e.setAttribute("x",this.#width*this.#size+this.#size),e.setAttribute("y",this.#height*this.#size+this.#size))}#changeIncreaseArrowSize(t){let e=document.getElementById("increase_arrow_"+t);e.setAttribute("font-size",this.#size),0==t?(e.setAttribute("x",this.#width*this.#size/2+this.#size/2),e.setAttribute("y",this.#height*this.#size+2*this.#size+this.#size/4)):1==t?(e.setAttribute("x",this.#width*this.#size+2*this.#size),e.setAttribute("y",this.#height*this.#size/2+this.#size/4)):(e.setAttribute("x",this.#width*this.#size+2*this.#size-this.#size/4),e.setAttribute("y",this.#height*this.#size+2*this.#size-this.#size/4))}#refreshArea(){this.#changeSvgDocumentSize();let t=document.getElementById("components");for(;t.firstChild;)t.removeChild(t.firstChild);this.#createBackground();for(let t=0;t<=this.#width;t++)this.#createLine(0,t);for(let t=0;t<=this.#height;t++)this.#createLine(1,t);let e=document.getElementById("arrows");for(;e.firstChild;)e.removeChild(e.firstChild);this.#createCalculated(0),this.#createCalculated(1),this.#createDecreaseArrow(0),this.#createIncreaseArrow(0),this.#createDecreaseArrow(1),this.#createIncreaseArrow(1),this.#createDecreaseArrow(2),this.#createIncreaseArrow(2);for(let t=0;t<125;t++)for(let e=0;e<50;e++){let i=document.getElementById("square_"+t+"."+e);t>=this.#width||e>=this.#height?i.setAttribute("opacity","0"):i.setAttribute("opacity","1")}}#refreshCalculatedValues(t,e){if(t<this.#width&&e<this.#height){let i=document.getElementById("square_"+t+"."+e);this.#clicked&&(i=document.getElementById("square_aux_"+t+"."+e));let s,r,h=i.getAttribute("fill"),o=1,u=t+1;for(;u<=this.#width-1&&(s=document.getElementById("square_"+u+"."+e),r=document.getElementById("square_aux_"+u+"."+e),s.getAttribute("fill")==h||r.getAttribute("fill")==h&&h!=this.#backgroundColor);)u++,o++;let n=t-1;for(;n>=0&&(s=document.getElementById("square_"+n+"."+e),r=document.getElementById("square_aux_"+n+"."+e),s.getAttribute("fill")==h||r.getAttribute("fill")==h&&h!=this.#backgroundColor);)n--,o++;let l=1,a=e+1;for(;a<=this.#height-1&&(s=document.getElementById("square_"+t+"."+a),r=document.getElementById("square_aux_"+t+"."+a),s.getAttribute("fill")==h||r.getAttribute("fill")==h&&h!=this.#backgroundColor);)a++,l++;let c=e-1;for(;c>=0&&(s=document.getElementById("square_"+t+"."+c),r=document.getElementById("square_aux_"+t+"."+c),s.getAttribute("fill")==h||r.getAttribute("fill")==h&&h!=this.#backgroundColor);)c--,l++;let d=document.getElementById("calculated_0"),g=document.getElementById("calculated_1");h!=this.#backgroundColor?(d.setAttribute("fill",h),g.setAttribute("fill",h)):(d.setAttribute("fill","#808080"),g.setAttribute("fill","#808080")),d.textContent=o,g.textContent=l,d.setAttribute("y",this.#size*(e+1)),g.setAttribute("x",this.#size*(t+.5))}}#cleanAllSquaresAux(){let t;for(let e=0;e<this.#width;e++)for(let i=0;i<this.#height;i++)t=document.getElementById("square_aux_"+e+"."+i),"1"==t.getAttribute("opacity")&&(t.setAttribute("fill",this.#backgroundColor),t.setAttribute("opacity","0"))}#refreshSquareAux(t,e){let i=document.getElementById("square_aux_"+t+"."+e),s=document.getElementById("square_"+t+"."+e);if(this.#colorSquare==this.#backgroundColor)i.setAttribute("fill",this.#colorSquare),i.setAttribute("opacity","1");else{s.getAttribute("fill")==this.#backgroundColor&&(i.setAttribute("fill",this.#colorSquare),i.setAttribute("opacity","1"))}}#refreshSquareColors(){let t=document.getElementById("palette");for(;t.firstChild;)t.removeChild(t.firstChild);for(let t=1;t<this.#palette.length;t++)this.#createSquareColor(t)}#refreshBackground(t){let e,i;document.getElementById("background").setAttribute("fill",this.#backgroundColor);for(let s=0;s<125;s++)for(let r=0;r<50;r++)i=document.getElementById("square_aux_"+s+"."+r),i.setAttribute("fill",this.#backgroundColor),e=document.getElementById("square_"+s+"."+r),e.getAttribute("fill")==t&&e.setAttribute("fill",this.#backgroundColor)}#getHorizontalNumbers(t){let e,i,s,r=[];for(let e=0;e<t.points.length;e++)r[e]=[];for(let h=0;h<t.points.length;h++){e=0,i=-1,s=!1;for(let o=t.points[0].length-1;o>=0;o--)s?(e++,0!=t.points[h][o]&&t.points[h][o]==i||(0==t.points[h][o]&&(s=!1),r[h].push({number:e,color:i}),e=0)):t.points[h][o]>0&&t.points[h][o]!=i&&(s=!0),i=t.points[h][o];s&&(e++,r[h].push({number:e,color:i}))}return r}#getVerticalNumbers(t){let e,i,s,r=[];for(let e=0;e<t.points[0].length;e++)r[e]=[];for(let h=0;h<t.points[0].length;h++){e=0,i=-1,s=!1;for(let o=t.points.length-1;o>=0;o--)s?(e++,0!=t.points[o][h]&&t.points[o][h]==i||(0==t.points[o][h]&&(s=!1),r[h].push({number:e,color:i}),e=0)):t.points[o][h]>0&&t.points[o][h]!=i&&(s=!0),i=t.points[o][h];s&&(e++,r[h].push({number:e,color:i}))}return r}#getMaxNumbers(t){let e=0,i=0;for(let s=0;s<t.length;s++)i=t[s].length,i>e&&(e=i);return e}#loadPoints(t){let e;for(let i=0;i<this.#height;i++)for(let s=0;s<this.#width;s++)e=document.getElementById("square_"+s+"."+i),e.setAttribute("fill",t.colors[t.points[i][s]]),e.setAttribute("opacity","1")}#markSquareColor(t){let e,i=t.target.getAttribute("id");i=i.replace("squareColor_",""),this.#currentColor=this.#palette[i],t.target.setAttribute("stroke-width","3");for(let t=1;t<this.#palette.length;t++)e=document.getElementById("squareColor_"+t),t!=i&&e.setAttribute("stroke-width","1");this.#refreshCursor()}#highlightSquare(t){let e=t.target.getAttribute("id");e=e.replace("square_aux_","");let i=e.split("."),s=parseInt(i[0]),r=parseInt(i[1]);if(s<this.#width&&r<this.#height){let t=document.getElementById("line_0."+s);t.setAttribute("stroke","#ff00ff"),s%this.#gridLength!=0&&t.setAttribute("stroke-width","2"),s+=1,t=document.getElementById("line_0."+s),t.setAttribute("stroke","#ff00ff"),s%this.#gridLength!=0&&t.setAttribute("stroke-width","2");let e=document.getElementById("line_1."+r);e.setAttribute("stroke","#ff00ff"),r%this.#gridLength!=0&&e.setAttribute("stroke-width","2"),r+=1,e=document.getElementById("line_1."+r),e.setAttribute("stroke","#ff00ff"),r%this.#gridLength!=0&&e.setAttribute("stroke-width","2"),document.getElementById("decrease_arrow_0").setAttribute("opacity","0"),document.getElementById("increase_arrow_0").setAttribute("opacity","0"),document.getElementById("decrease_arrow_1").setAttribute("opacity","0"),document.getElementById("increase_arrow_1").setAttribute("opacity","0"),document.getElementById("decrease_arrow_2").setAttribute("opacity","0"),document.getElementById("increase_arrow_2").setAttribute("opacity","0")}}#fadeSquare(t){let e=t.target.getAttribute("id");e=e.replace("square_aux_","");let i=e.split("."),s=parseInt(i[0]),r=parseInt(i[1]);if(s<this.#width&&r<this.#height){let t=document.getElementById("line_0."+s);t.setAttribute("stroke","#808080"),s%this.#gridLength!=0&&t.setAttribute("stroke-width","1"),s+=1,t=document.getElementById("line_0."+s),t.setAttribute("stroke","#808080"),s%this.#gridLength!=0&&t.setAttribute("stroke-width","1");let e=document.getElementById("line_1."+r);e.setAttribute("stroke","#808080"),r%this.#gridLength!=0&&e.setAttribute("stroke-width","1"),r+=1,e=document.getElementById("line_1."+r),e.setAttribute("stroke","#808080"),r%this.#gridLength!=0&&e.setAttribute("stroke-width","1"),document.getElementById("calculated_0").textContent="",document.getElementById("calculated_1").textContent="",document.getElementById("decrease_arrow_0").setAttribute("opacity","0.5"),document.getElementById("increase_arrow_0").setAttribute("opacity","0.5"),document.getElementById("decrease_arrow_1").setAttribute("opacity","0.5"),document.getElementById("increase_arrow_1").setAttribute("opacity","0.5"),document.getElementById("decrease_arrow_2").setAttribute("opacity","0.5"),document.getElementById("increase_arrow_2").setAttribute("opacity","0.5")}}#initColorsChange(t){if(0==t.button){let e=t.target.getAttribute("id");e=e.replace("square_aux_","");let i=e.split(".");this.#squareI=parseInt(i[0]),this.#squareJ=parseInt(i[1]);let s=document.getElementById("square_"+this.#squareI+"."+this.#squareJ);this.#squareI<this.#width&&this.#squareJ<this.#height&&(this.#colorSquare=s.getAttribute("fill"),this.#colorSquare==this.#backgroundColor?(t.target.setAttribute("fill",this.#currentColor),t.target.setAttribute("opacity","1"),s.setAttribute("fill",this.#currentColor),s.setAttribute("opacity","1"),this.#colorSquare=this.#currentColor):this.#colorSquare==this.#currentColor?(t.target.setAttribute("fill",this.#backgroundColor),t.target.setAttribute("opacity","0"),s.setAttribute("fill",this.#backgroundColor),s.setAttribute("opacity","0"),this.#colorSquare=this.#backgroundColor):(t.target.setAttribute("fill",this.#currentColor),s.setAttribute("fill",this.#currentColor),this.#colorSquare=this.#currentColor),this.#clicked=!0,this.#refreshCalculatedValues(this.#squareI,this.#squareJ))}}#changeColorSquares(t){let e=t.target.getAttribute("id");e=e.replace("square_aux_","");let i=e.split("."),s=parseInt(i[0]),r=parseInt(i[1]);if(this.#clicked){let t;if(this.#cleanAllSquaresAux(),s>this.#squareI&&r==this.#squareJ)for(t=this.#squareI;t<=s;)t<this.#width&&this.#refreshSquareAux(t,this.#squareJ),t++;else if(s<this.#squareI&&r==this.#squareJ)for(t=s;t<=this.#squareI;)this.#refreshSquareAux(t,this.#squareJ),t++;else if(s==this.#squareI&&r>this.#squareJ)for(t=this.#squareJ;t<=r;)t<this.#height&&this.#refreshSquareAux(this.#squareI,t),t++;else if(s==this.#squareI&&r<this.#squareJ)for(t=r;t<=this.#squareJ;)this.#refreshSquareAux(this.#squareI,t),t++}this.#refreshCalculatedValues(s,r)}#highlightDecreaseArrow(t){t.target.setAttribute("opacity","1")}#fadeDecreaseArrow(t){t.target.setAttribute("opacity","0.5")}#decreaseSize(t){let e=t.target.getAttribute("id").replace("decrease_arrow_","");0==e||1==e?(this.#height-=this.#gridLength,this.#height<3&&(this.#height+=this.#gridLength)):(this.#height-=this.#gridLength,this.#height<3&&(this.#height+=this.#gridLength),this.#width-=this.#gridLength,this.#width<3&&(this.#width+=this.#gridLength)),this.#refreshArea()}#highlightIncreaseArrow(t){t.target.setAttribute("opacity","1")}#fadeIncreaseArrow(t){t.target.setAttribute("opacity","0.5")}#increaseSize(t){let e=t.target.getAttribute("id").replace("increase_arrow_","");0==e?(this.#height+=this.#gridLength,this.#height>50&&(this.#height-=this.#gridLength)):1==e?(this.#width+=this.#gridLength,this.#width>125&&(this.#width-=this.#gridLength)):(this.#height+=this.#gridLength,this.#height>50&&(this.#height-=this.#gridLength),this.#width+=this.#gridLength,this.#width>125&&(this.#width-=this.#gridLength)),this.#refreshArea()}#switchSquareColor(){let t,e,i=document.getElementById("palette").children;for(let e=0;e<i.length;e++)if(3==i[e].getAttribute("stroke-width")){t=e==i.length-1?0:e+1;break}this.#currentColor=this.#palette[t+1],i[t].setAttribute("stroke-width","3");for(let i=1;i<this.#palette.length;i++)e=document.getElementById("squareColor_"+i),i!=t+1&&e.setAttribute("stroke-width","1");this.#refreshCursor()}#endColorsChange(){if(this.#clicked){let t,e,i,s;for(let r=0;r<this.#width;r++)for(let h=0;h<this.#height;h++)t=document.getElementById("square_aux_"+r+"."+h),"1"==t.getAttribute("opacity")&&(e=t.getAttribute("id"),e=e.replace("square_aux_","square_"),i=document.getElementById(e),s=t.getAttribute("fill"),i.setAttribute("fill",s),s==this.#backgroundColor?i.setAttribute("opacity","0"):i.setAttribute("opacity","1"),t.setAttribute("fill",this.#backgroundColor),t.setAttribute("opacity","0"));this.#clicked=!1,this.#saveState()}}}