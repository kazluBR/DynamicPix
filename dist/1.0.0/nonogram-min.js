//compress by https://codebeautify.org/minify-js
const SVG_LIB="http://www.w3.org/2000/svg",SQUARE_COLOR_SIZE=40,TRANSLATE_X=10,TRANSLATE_Y=0,LINE_COLOR="#808080",MARK_COLOR="#808080",CALCULATED_EMPTY_COLOR="#808080",RULE_COLOR="#ff00ff",SIGNAL_CORRECT_COLOR="#adff2f",SIGNAL_ERROR_COLOR="#b22222",NUMBER_DEFAULT_COLOR="#ffffff";class nonogram{#t;#e;#i;#s;#r;#a;#l;#u;#h;#n;#o;#d;constructor(t={}){this.#t=t.size||20,this.#e=t.showErrorsOnCheck||!1,this.#i={},this.#s=!1,this.#r=!1,this.#a=[],this.#l=0,this.#u=null,this.#h=null,this.#n=null,this.#o=null,this.#d=null,document.body.onmousedown=t=>{if(1==t.button)return this.#c(),!1},document.body.onmouseup=()=>this.#g(),this.#b()}init(t){this.#i=t,this.#m(),this.#A(),this.#s=!1,this.#o=t.colors[1];for(let t=1;t<this.#i.colors.length;t++)this.#f(t);let e=this.#i.settings.horizontalNumbersLength*this.#t,i=this.#i.settings.verticalNumbersLength*this.#t;this.#y(e,i);for(let t=0;t<this.#i.settings.width;t++)for(let s=0;s<this.#i.settings.height;s++)this.#z(e,i,t,s),this.#S(e,i,t,s),this.#p(e,i,t,s),this.#_(e,i,t,s);for(let t=0;t<=this.#i.settings.width;t++){if(t<this.#i.settings.width){this.#I(e,i,0,t);for(let s=1;s<=this.#i.verticalNumbers[t].length;s++)this.#E(e,i,0,t,s),this.#q(e,i,0,t,s)}this.#B(e,i,0,t)}for(let t=0;t<=this.#i.settings.height;t++){if(t<this.#i.settings.height){this.#I(e,i,1,t);for(let s=1;s<=this.#i.horizontalNumbers[t].length;s++)this.#E(e,i,1,t,s),this.#q(e,i,1,t,s)}this.#B(e,i,1,t)}this.#k(e,i,0),this.#k(e,i,1),this.#x(),this.#C(),this.#w()}maximize(t){null!=this.#i&&(this.#t+=t||1,this.#N())}minimize(t){null!=this.#i&&(this.#t-=t||1,this.#t<1?this.#t+=t||1:this.#N())}undo(){null!=this.#i&&this.#l>0&&(this.#l-=1,this.#L())}redo(){null!=this.#i&&this.#l<this.#a.length-1&&(this.#l+=1,this.#L())}check(){if(null!=this.#i){let t,e,i,s,r,a,l,u=0;for(let h=0;h<this.#i.settings.width;h++){a=document.getElementById("signal_0."+h);for(let n=0;n<this.#i.settings.height;n++)t=document.getElementById("square_"+h+"."+n),e=t.getAttribute("fill"),i=t.getAttribute("opacity"),l=document.getElementById("signal_1."+n),e!=this.#i.colors[this.#i.points[n][h]]&&"1"==i?(this.#e&&(a.setAttribute("opacity","1"),a.setAttribute("fill","#b22222"),l.setAttribute("opacity","1"),l.setAttribute("fill","#b22222")),u++):(s=document.getElementById("mark_"+h+"."+n),r=s.getAttribute("opacity"),0!=this.#i.points[n][h]&&"1"==r&&(this.#e&&(a.setAttribute("opacity","1"),a.setAttribute("fill","#b22222"),l.setAttribute("opacity","1"),l.setAttribute("fill","#b22222")),u++))}return u}}solve(){if(null!=this.#i){let t;for(let e=0;e<this.#i.settings.height;e++)for(let i=0;i<this.#i.settings.width;i++)t=document.getElementById("square_"+i+"."+e),t.setAttribute("fill",this.#i.colors[this.#i.points[e][i]]),t.setAttribute("opacity","1");this.#x()}}#b(){let t=document.getElementById("nonogram");t.oncontextmenu=function(){return!1};let e=document.createElementNS(SVG_LIB,"svg"),i="translate(10,0)",s=document.createElementNS(SVG_LIB,"g");s.setAttribute("transform",i),s.setAttribute("id","palette"),e.appendChild(s);i="translate(10,60)";let r=document.createElementNS(SVG_LIB,"g");r.setAttribute("id","main"),r.setAttribute("transform",i),e.appendChild(r);let a=document.createElementNS(SVG_LIB,"g");a.setAttribute("id","components"),a.setAttribute("transform",i),e.appendChild(a);let l=document.createElementNS(SVG_LIB,"g");l.setAttribute("id","aux"),l.setAttribute("transform",i),e.appendChild(l),t.appendChild(e)}#f(t){let e=document.createElementNS(SVG_LIB,"rect");e.setAttribute("id","squareColor_"+t),1==t?e.setAttribute("stroke-width","3"):e.setAttribute("stroke-width","1"),e.setAttribute("stroke","black"),e.setAttribute("height",40),e.setAttribute("width",40),e.setAttribute("fill",this.#i.colors[t]),e.setAttribute("x",40*(t-1)+5),e.setAttribute("y",5),e.onclick=t=>this.#v(t),document.getElementById("palette").appendChild(e)}#y(t,e){let i=document.createElementNS(SVG_LIB,"rect");i.setAttribute("id","background"),i.setAttribute("fill",this.#i.colors[0]),i.setAttribute("height",this.#t*this.#i.settings.height),i.setAttribute("width",this.#t*this.#i.settings.width),i.setAttribute("x",t),i.setAttribute("y",e),document.getElementById("main").appendChild(i)}#z(t,e,i,s){let r=document.createElementNS(SVG_LIB,"text");r.setAttribute("id","mark_"+i+"."+s),r.setAttribute("text-anchor","middle"),r.setAttribute("font-family","serif"),r.setAttribute("font-size",this.#t),r.setAttribute("fill","#808080"),r.setAttribute("x",t+(i+.5)*this.#t),r.setAttribute("y",e+(s+.85)*this.#t),r.setAttribute("opacity","0"),r.textContent="•",r.setAttribute("style","-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;"),document.getElementById("main").appendChild(r)}#p(t,e,i,s){let r=document.createElementNS(SVG_LIB,"text");r.setAttribute("id","mark_aux_"+i+"."+s),r.setAttribute("text-anchor","middle"),r.setAttribute("font-family","serif"),r.setAttribute("font-size",this.#t),r.setAttribute("fill","#808080"),r.setAttribute("x",t+(i+.5)*this.#t),r.setAttribute("y",e+(s+.85)*this.#t),r.setAttribute("opacity","0"),r.textContent="•",r.setAttribute("style","-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;"),document.getElementById("aux").appendChild(r)}#S(t,e,i,s){let r=document.createElementNS(SVG_LIB,"rect");r.setAttribute("id","square_"+i+"."+s),r.setAttribute("fill",this.#i.colors[0]),r.setAttribute("opacity","0"),r.setAttribute("height",.9*this.#t),r.setAttribute("width",.9*this.#t),r.setAttribute("x",t+i*this.#t+.05*this.#t),r.setAttribute("y",e+s*this.#t+.05*this.#t),document.getElementById("main").appendChild(r)}#_(t,e,i,s){let r=document.createElementNS(SVG_LIB,"rect");r.setAttribute("id","square_aux_"+i+"."+s),r.setAttribute("fill",this.#i.colors[0]),r.setAttribute("opacity","0"),r.setAttribute("height",.9*this.#t),r.setAttribute("width",.9*this.#t),r.setAttribute("x",t+i*this.#t+.05*this.#t),r.setAttribute("y",e+s*this.#t+.05*this.#t),r.onmouseover=t=>this.#V(t),r.onmouseout=t=>this.#O(t),r.onmousedown=t=>this.#M(t),r.onmousemove=t=>this.#G(t),document.getElementById("aux").appendChild(r)}#I(t,e,i,s){let r=document.createElementNS(SVG_LIB,"text");r.setAttribute("id","signal_"+i+"."+s),r.setAttribute("font-size",this.#t),r.setAttribute("opacity","0"),0==i?(r.setAttribute("text-anchor","start"),r.setAttribute("x",t+s*this.#t),r.setAttribute("y",e+(this.#i.settings.height+1)*this.#t),r.textContent="⏶"):(r.setAttribute("text-anchor","end"),r.setAttribute("x",t+(this.#i.settings.width+1)*this.#t),r.setAttribute("y",e+(s+.9)*this.#t),r.textContent="⏴"),r.setAttribute("style","-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;"),document.getElementById("components").appendChild(r)}#E(t,e,i,s,r){let a=document.createElementNS(SVG_LIB,"rect");if(a.setAttribute("id","squareNumber_"+i+"."+s+"."+(r-1)),a.setAttribute("opacity","1"),a.setAttribute("height",this.#t),a.setAttribute("width",this.#t),0==i){a.setAttribute("x",t+s*this.#t),a.setAttribute("y",e-r*this.#t);let i=this.#i.verticalNumbers[s][r-1].color;a.setAttribute("fill",this.#i.colors[i])}else{a.setAttribute("x",t-r*this.#t),a.setAttribute("y",e+s*this.#t);let i=this.#i.horizontalNumbers[s][r-1].color;a.setAttribute("fill",this.#i.colors[i])}a.onclick=t=>this.#R(t),document.getElementById("components").appendChild(a)}#q(t,e,i,s,r){let a=document.createElementNS(SVG_LIB,"text");a.setAttribute("id","number_"+i+"."+s+"."+(r-1)),a.setAttribute("text-anchor","middle"),a.setAttribute("font-family","serif"),a.setAttribute("font-size",.9*this.#t),a.setAttribute("font-weight","normal"),a.setAttribute("fill","#ffffff"),0==i?(a.setAttribute("x",t+s*this.#t+.5*this.#t),a.setAttribute("y",e-r*this.#t+.8*this.#t),a.textContent=this.#i.verticalNumbers[s][r-1].number):(a.setAttribute("x",t-r*this.#t+.5*this.#t),a.setAttribute("y",e+s*this.#t+.8*this.#t),a.textContent=this.#i.horizontalNumbers[s][r-1].number),a.setAttribute("style","-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;"),a.onclick=t=>this.#J(t),document.getElementById("components").appendChild(a)}#B(t,e,i,s){let r=document.createElementNS(SVG_LIB,"line");r.setAttribute("id","line_"+i+"."+s),r.setAttribute("stroke","#808080"),s%this.#i.settings.gridLength==0?r.setAttribute("stroke-width","2"):r.setAttribute("stroke-width","1"),0==i?(r.setAttribute("x1",t+s*this.#t),r.setAttribute("x2",t+s*this.#t),r.setAttribute("y1",e-this.#i.settings.verticalNumbersLength*this.#t),r.setAttribute("y2",e+this.#i.settings.height*this.#t)):(r.setAttribute("x1",t-this.#i.settings.horizontalNumbersLength*this.#t),r.setAttribute("x2",t+this.#i.settings.width*this.#t),r.setAttribute("y1",e+s*this.#t),r.setAttribute("y2",e+s*this.#t)),document.getElementById("components").appendChild(r)}#k(t,e,i){let s=document.createElementNS(SVG_LIB,"text");s.setAttribute("id","calculated_"+i),s.setAttribute("font-family","serif"),s.setAttribute("font-size",this.#t),s.setAttribute("font-weight","bold"),s.setAttribute("fill","#808080"),0==i?(s.setAttribute("text-anchor","start"),s.setAttribute("x",t+(this.#i.settings.width+1)*this.#t+this.#t/4)):(s.setAttribute("text-anchor","middle"),s.setAttribute("y",e+(this.#i.settings.height+1)*this.#t+this.#t)),s.setAttribute("style","-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;"),document.getElementById("components").appendChild(s)}#w(){document.getElementById("nonogram").style="cursor: url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24'%3e%3cpath fill='%23"+this.#o.replace("#","")+"' stroke='black' d='M7.127 22.562l-7.127 1.438 1.438-7.128 5.689 5.69zm1.414-1.414l11.228-11.225-5.69-5.692-11.227 11.227 5.689 5.69zm9.768-21.148l-2.816 2.817 5.691 5.691 2.816-2.819-5.691-5.689z'/%3e%3c/svg%3e\") 0 32, pointer;"}#m(){let t=document.getElementById("palette");for(;t.firstChild;)t.removeChild(t.firstChild);let e=document.getElementById("components");for(;e.firstChild;)e.removeChild(e.firstChild);let i=document.getElementById("main");for(;i.firstChild;)i.removeChild(i.firstChild);let s=document.getElementById("aux");for(;s.firstChild;)s.removeChild(s.firstChild);this.#a=[]}#A(){let t=document.getElementsByTagName("svg")[0];t.setAttribute("height",this.#t*this.#i.settings.verticalNumbersLength+this.#t*(this.#i.settings.height+3)+0+60),t.setAttribute("width",this.#t*this.#i.settings.horizontalNumbersLength+this.#t*(this.#i.settings.width+3)+10)}#x(){let t,e,i,s,r,a;this.#s=!0;for(let l=0;l<this.#i.settings.width;l++){t=!0,s=document.getElementById("signal_0."+l);for(let r=0;r<this.#i.settings.height;r++)if(e=document.getElementById("square_"+l+"."+r),i=e.getAttribute("fill"),i!=this.#i.colors[this.#i.points[r][l]]){t=!1,this.#s=!1,"1"==s.getAttribute("opacity")&&s.setAttribute("opacity","0");break}if(t){for(let t=0;t<this.#i.verticalNumbers[l].length;t++)r=document.getElementById("squareNumber_0."+l+"."+t),r.setAttribute("opacity","0"),a=document.getElementById("number_0."+l+"."+t),a.setAttribute("fill",r.getAttribute("fill")),a.setAttribute("font-weight","bold");"0"!=s.getAttribute("opacity")&&"#b22222"!=s.getAttribute("fill")||(s.setAttribute("fill","#adff2f"),s.setAttribute("opacity","1"))}}for(let l=0;l<this.#i.settings.height;l++){t=!0,s=document.getElementById("signal_1."+l);for(let r=0;r<this.#i.settings.width;r++)if(e=document.getElementById("square_"+r+"."+l),i=e.getAttribute("fill"),i!=this.#i.colors[this.#i.points[l][r]]){t=!1,this.#s=!1,"1"==s.getAttribute("opacity")&&s.setAttribute("opacity","0");break}if(t){for(let t=0;t<this.#i.horizontalNumbers[l].length;t++)r=document.getElementById("squareNumber_1."+l+"."+t),r.setAttribute("opacity","0"),a=document.getElementById("number_1."+l+"."+t),a.setAttribute("fill",r.getAttribute("fill")),a.setAttribute("font-weight","bold");"0"!=s.getAttribute("opacity")&&"#b22222"!=s.getAttribute("fill")||(s.setAttribute("fill","#adff2f"),s.setAttribute("opacity","1"))}}if(this.#s){let t;for(let e=0;e<this.#i.settings.height;e++)for(let i=0;i<this.#i.settings.width;i++)t=document.getElementById("mark_"+i+"."+e),t.setAttribute("opacity","0");document.getElementById("calculated_0").textContent="",document.getElementById("calculated_1").textContent=""}}#N(){this.#A();let t=this.#i.settings.horizontalNumbersLength*this.#t,e=this.#i.settings.verticalNumbersLength*this.#t;this.#K(t,e);for(let i=0;i<this.#i.settings.width;i++)for(let s=0;s<this.#i.settings.height;s++)this.#T(t,e,i,s),this.#D(t,e,i,s),this.#U(t,e,i,s),this.#F(t,e,i,s);for(let i=0;i<=this.#i.settings.width;i++){if(i<this.#i.settings.width){this.#P(t,e,0,i);for(let s=1;s<=this.#i.verticalNumbers[i].length;s++)this.#X(t,e,0,i,s),this.#Y(t,e,0,i,s)}this.#Q(t,e,0,i)}for(let i=0;i<=this.#i.settings.height;i++){if(i<this.#i.settings.height){this.#P(t,e,1,i);for(let s=1;s<=this.#i.horizontalNumbers[i].length;s++)this.#X(t,e,1,i,s),this.#Y(t,e,1,i,s)}this.#Q(t,e,1,i)}this.#Z(t,e,0),this.#Z(t,e,1)}#K(t,e){let i=document.getElementById("background");i.setAttribute("height",this.#t*this.#i.settings.height),i.setAttribute("width",this.#t*this.#i.settings.width),i.setAttribute("x",t),i.setAttribute("y",e)}#T(t,e,i,s){let r=document.getElementById("mark_"+i+"."+s);r.setAttribute("font-size",this.#t),r.setAttribute("x",t+(i+.5)*this.#t),r.setAttribute("y",e+(s+.85)*this.#t)}#D(t,e,i,s){let r=document.getElementById("mark_aux_"+i+"."+s);r.setAttribute("font-size",this.#t),r.setAttribute("x",t+(i+.5)*this.#t),r.setAttribute("y",e+(s+.85)*this.#t)}#U(t,e,i,s){let r=document.getElementById("square_"+i+"."+s);r.setAttribute("height",.9*this.#t),r.setAttribute("width",.9*this.#t),r.setAttribute("x",t+i*this.#t+.05*this.#t),r.setAttribute("y",e+s*this.#t+.05*this.#t)}#F(t,e,i,s){let r=document.getElementById("square_aux_"+i+"."+s);r.setAttribute("height",.9*this.#t),r.setAttribute("width",.9*this.#t),r.setAttribute("x",t+i*this.#t+.05*this.#t),r.setAttribute("y",e+s*this.#t+.05*this.#t)}#P(t,e,i,s){let r=document.getElementById("signal_"+i+"."+s);r.setAttribute("font-size",this.#t),0==i?(r.setAttribute("x",t+s*this.#t),r.setAttribute("y",e+(this.#i.settings.height+1)*this.#t)):(r.setAttribute("x",t+(this.#i.settings.width+1)*this.#t),r.setAttribute("y",e+(s+.9)*this.#t))}#Y(t,e,i,s,r){let a=document.getElementById("number_"+i+"."+s+"."+(r-1));a.setAttribute("font-size",.9*this.#t),0==i?(a.setAttribute("x",t+s*this.#t+.5*this.#t),a.setAttribute("y",e-r*this.#t+.8*this.#t)):(a.setAttribute("x",t-r*this.#t+.5*this.#t),a.setAttribute("y",e+s*this.#t+.8*this.#t))}#X(t,e,i,s,r){let a=document.getElementById("squareNumber_"+i+"."+s+"."+(r-1));a.setAttribute("height",this.#t),a.setAttribute("width",this.#t),0==i?(a.setAttribute("x",t+s*this.#t),a.setAttribute("y",e-r*this.#t)):(a.setAttribute("x",t-r*this.#t),a.setAttribute("y",e+s*this.#t))}#Q(t,e,i,s){let r=document.getElementById("line_"+i+"."+s);0==i?(r.setAttribute("x1",t+s*this.#t),r.setAttribute("x2",t+s*this.#t),r.setAttribute("y1",e-this.#i.settings.verticalNumbersLength*this.#t),r.setAttribute("y2",e+this.#i.settings.height*this.#t)):(r.setAttribute("x1",t-this.#i.settings.horizontalNumbersLength*this.#t),r.setAttribute("x2",t+this.#i.settings.width*this.#t),r.setAttribute("y1",e+s*this.#t),r.setAttribute("y2",e+s*this.#t))}#Z(t,e,i){let s=document.getElementById("calculated_"+i);s.setAttribute("font-size",this.#t),0==i?s.setAttribute("x",t+(this.#i.settings.width+1)*this.#t+this.#t/4):s.setAttribute("y",e+(this.#i.settings.height+1)*this.#t+this.#t)}#C(){for(;this.#l<this.#a.length-1;)this.#a.pop();this.#a.push((new XMLSerializer).serializeToString(document.getElementById("main"))),this.#a.length>1&&(this.#l+=1)}#L(){let t=document.getElementById("main");for(;t.firstChild;)t.removeChild(t.firstChild);let e=(new DOMParser).parseFromString(this.#a[this.#l],"image/svg+xml").documentElement;for(;e.firstChild;)t.appendChild(e.firstChild);this.#x(),this.#N()}#j(t,e){let i=document.getElementById("square_"+t+"."+e);this.#r&&(i=document.getElementById("square_aux_"+t+"."+e));let s,r,a=i.getAttribute("fill"),l=1,u=t+1;for(;u<=this.#i.settings.width-1&&(s=document.getElementById("square_"+u+"."+e),r=document.getElementById("square_aux_"+u+"."+e),s.getAttribute("fill")==a||r.getAttribute("fill")==a&&a!=this.#i.colors[0]);)u++,l++;let h=t-1;for(;h>=0&&(s=document.getElementById("square_"+h+"."+e),r=document.getElementById("square_aux_"+h+"."+e),s.getAttribute("fill")==a||r.getAttribute("fill")==a&&a!=this.#i.colors[0]);)h--,l++;let n=1,o=e+1;for(;o<=this.#i.settings.height-1&&(s=document.getElementById("square_"+t+"."+o),r=document.getElementById("square_aux_"+t+"."+o),s.getAttribute("fill")==a||r.getAttribute("fill")==a&&a!=this.#i.colors[0]);)o++,n++;let d=e-1;for(;d>=0&&(s=document.getElementById("square_"+t+"."+d),r=document.getElementById("square_aux_"+t+"."+d),s.getAttribute("fill")==a||r.getAttribute("fill")==a&&a!=this.#i.colors[0]);)d--,n++;let c=document.getElementById("calculated_0"),g=document.getElementById("calculated_1");a!=this.#i.colors[0]?(c.setAttribute("fill",a),g.setAttribute("fill",a)):(c.setAttribute("fill","#808080"),g.setAttribute("fill","#808080")),c.textContent=l,g.textContent=n;let b=this.#i.settings.verticalNumbersLength*this.#t;c.setAttribute("y",b+this.#t*(e+.9));let m=this.#i.settings.horizontalNumbersLength*this.#t;g.setAttribute("x",m+this.#t*(t+.5))}#H(){let t,e;for(let i=0;i<this.#i.settings.width;i++)for(let s=0;s<this.#i.settings.height;s++)t=document.getElementById("square_aux_"+i+"."+s),"1"==t.getAttribute("opacity")&&(i==this.#u&&s==this.#h||(t.setAttribute("fill",this.#i.colors[0]),t.setAttribute("opacity","0"))),e=document.getElementById("mark_aux_"+i+"."+s),"1"==e.getAttribute("opacity")&&(i==this.#u&&s==this.#h||e.setAttribute("opacity","0"))}#W(t,e){let i,s,r=document.getElementById("square_aux_"+t+"."+e),a=document.getElementById("square_"+t+"."+e),l=document.getElementById("mark_aux_"+t+"."+e),u=document.getElementById("mark_"+t+"."+e);this.#d?(i=a.getAttribute("fill"),i==this.#i.colors[0]&&l.setAttribute("opacity","1")):this.#n==this.#i.colors[0]?(r.setAttribute("fill",this.#n),r.setAttribute("opacity","1"),l.setAttribute("opacity","0.1")):(i=a.getAttribute("fill"),s=u.getAttribute("opacity"),i==this.#i.colors[0]&&"0"==s&&(r.setAttribute("fill",this.#n),r.setAttribute("opacity","1")))}#v(t){let e,i=t.target.getAttribute("id");i=i.replace("squareColor_",""),this.#o=this.#i.colors[i],t.target.setAttribute("stroke-width","3");for(let t=1;t<this.#i.colors.length;t++)e=document.getElementById("squareColor_"+t),t!=i&&e.setAttribute("stroke-width","1");this.#w()}#V(t){if(!this.#s){let e=t.target.getAttribute("id");e=e.replace("square_aux_","");let i=e.split("."),s=parseInt(i[0]),r=parseInt(i[1]),a=document.getElementById("line_0."+s);a.setAttribute("stroke","#ff00ff"),s%this.#i.settings.gridLength!=0&&a.setAttribute("stroke-width","2");let l=document.getElementById("line_1."+r);l.setAttribute("stroke","#ff00ff"),r%this.#i.settings.gridLength!=0&&l.setAttribute("stroke-width","2"),s+=1,r+=1,a=document.getElementById("line_0."+s),a.setAttribute("stroke","#ff00ff"),s%this.#i.settings.gridLength!=0&&a.setAttribute("stroke-width","2"),l=document.getElementById("line_1."+r),l.setAttribute("stroke","#ff00ff"),r%this.#i.settings.gridLength!=0&&l.setAttribute("stroke-width","2")}}#O(t){if(!this.#s){let e=t.target.getAttribute("id");e=e.replace("square_aux_","");let i=e.split("."),s=parseInt(i[0]),r=parseInt(i[1]),a=document.getElementById("line_0."+s);a.setAttribute("stroke","#808080"),s%this.#i.settings.gridLength!=0&&a.setAttribute("stroke-width","1");let l=document.getElementById("line_1."+r);l.setAttribute("stroke","#808080"),r%this.#i.settings.gridLength!=0&&l.setAttribute("stroke-width","1"),s+=1,r+=1,a=document.getElementById("line_0."+s),a.setAttribute("stroke","#808080"),s%this.#i.settings.gridLength!=0&&a.setAttribute("stroke-width","1"),l=document.getElementById("line_1."+r),l.setAttribute("stroke","#808080"),r%this.#i.settings.gridLength!=0&&l.setAttribute("stroke-width","1"),document.getElementById("calculated_0").textContent="",document.getElementById("calculated_1").textContent=""}}#M(t){if(!this.#s&&1!=t.button){let e=t.target.getAttribute("id");e=e.replace("square_aux_","");let i=e.split(".");this.#u=parseInt(i[0]),this.#h=parseInt(i[1]);let s=document.getElementById("square_"+this.#u+"."+this.#h);this.#n=s.getAttribute("fill");let r=document.getElementById("mark_aux_"+this.#u+"."+this.#h),a=document.getElementById("mark_"+this.#u+"."+this.#h),l=a.getAttribute("opacity");this.#d=!1,this.#n==this.#i.colors[0]?"0"==l?0==t.button?(t.target.setAttribute("fill",this.#o),t.target.setAttribute("opacity","1"),s.setAttribute("fill",this.#o),s.setAttribute("opacity","1"),this.#n=this.#o):(r.setAttribute("opacity","1"),a.setAttribute("opacity","1"),this.#d=!0):(0==t.button&&(t.target.setAttribute("fill",this.#o),t.target.setAttribute("opacity","1"),s.setAttribute("fill",this.#o),s.setAttribute("opacity","1"),this.#n=this.#o),r.setAttribute("opacity","0.1"),a.setAttribute("opacity","0")):0==t.button?this.#n!=this.#o?(t.target.setAttribute("fill",this.#o),s.setAttribute("fill",this.#o),this.#n=this.#o):(t.target.setAttribute("fill",this.#i.colors[0]),t.target.setAttribute("opacity","0"),s.setAttribute("fill",this.#i.colors[0]),s.setAttribute("opacity","0"),this.#n=this.#i.colors[0]):(t.target.setAttribute("fill",this.#i.colors[0]),t.target.setAttribute("opacity","0"),s.setAttribute("fill",this.#i.colors[0]),s.setAttribute("opacity","0"),r.setAttribute("opacity","1"),a.setAttribute("opacity","1"),this.#d=!0),this.#r=!0,this.#j(this.#u,this.#h)}}#G(t){if(!this.#s){let e=t.target.getAttribute("id");e=e.replace("square_aux_","");let i,s=e.split("."),r=parseInt(s[0]),a=parseInt(s[1]);if(this.#r)if(this.#H(),r>this.#u&&a==this.#h)for(i=this.#u;i<=r;)this.#W(i,this.#h),i++;else if(r<this.#u&&a==this.#h)for(i=r;i<=this.#u;)this.#W(i,this.#h),i++;else if(r==this.#u&&a>this.#h)for(i=this.#h;i<=a;)this.#W(this.#u,i),i++;else if(r==this.#u&&a<this.#h)for(i=a;i<=this.#h;)this.#W(this.#u,i),i++;this.#j(r,a)}}#R(t){if(!this.#s){let e=t.target.getAttribute("opacity"),i=t.target.getAttribute("id");i=i.replace("squareNumber_","");let s=i.split("."),r=parseInt(s[0]),a=parseInt(s[1]),l=parseInt(s[2]),u=document.getElementById("number_"+r+"."+a+"."+l);"1"==e?(t.target.setAttribute("opacity","0"),u.setAttribute("fill",t.target.getAttribute("fill")),u.setAttribute("font-weight","bold")):(t.target.setAttribute("opacity","1"),u.setAttribute("fill","#ffffff"),u.setAttribute("font-weight","normal"))}}#J(t){if(!this.#s){let e=t.target.getAttribute("fill"),i=t.target.getAttribute("id");i=i.replace("number_","");let s=i.split("."),r=parseInt(s[0]),a=parseInt(s[1]),l=parseInt(s[2]),u=document.getElementById("squareNumber_"+r+"."+a+"."+l);e==this.#i.colors[0]?(u.setAttribute("opacity","0"),t.target.setAttribute("fill",u.getAttribute("fill")),t.target.setAttribute("font-weight","bold")):(u.setAttribute("opacity","1"),t.target.setAttribute("fill","#ffffff"),t.target.setAttribute("font-weight","normal"))}}#c(){let t,e,i=document.getElementById("palette").children;for(let e=0;e<i.length;e++)if(3==i[e].getAttribute("stroke-width")){t=e==i.length-1?0:e+1;break}this.#o=this.#i.colors[t+1],i[t].setAttribute("stroke-width","3");for(let i=1;i<this.#i.colors.length;i++)e=document.getElementById("squareColor_"+i),i!=t+1&&e.setAttribute("stroke-width","1");this.#w()}#g(){if(this.#r&&null!=this.#i){let t,e,i,s,r,a;for(let l=0;l<this.#i.settings.width;l++)for(let u=0;u<this.#i.settings.height;u++)t=document.getElementById("square_aux_"+l+"."+u),"1"==t.getAttribute("opacity")&&(e=t.getAttribute("id"),e=e.replace("square_aux_","square_"),i=document.getElementById(e),s=t.getAttribute("fill"),i.setAttribute("fill",s),s==this.#i.colors[0]?i.setAttribute("opacity","0"):i.setAttribute("opacity","1"),t.setAttribute("fill",this.#i.colors[0]),t.setAttribute("opacity","0")),r=document.getElementById("mark_aux_"+l+"."+u),"1"==r.getAttribute("opacity")?(e=r.getAttribute("id"),e=e.replace("mark_aux_","mark_"),a=document.getElementById(e),a.setAttribute("opacity","1"),r.setAttribute("opacity","0")):"0.1"==r.getAttribute("opacity")&&(e=r.getAttribute("id"),e=e.replace("mark_aux_","mark_"),a=document.getElementById(e),a.setAttribute("opacity","0"),r.setAttribute("opacity","0"));this.#r=!1,this.#x(),this.#C()}}}